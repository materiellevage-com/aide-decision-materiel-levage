<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aide au choix ‚Äî Arbre de d√©cision Levage | MATERIEL-LEVAGE</title>
  <meta name="description" content="Arbre de d√©cision levage (Q1‚ÜíQ5) : qualifier un besoin utilisateur et orienter vers familles de produits (supports, appareils, accessoires) avec synth√®se et cahier des charges." />

  <style>
    /* =========================
       CHARTE "CATALOGUE" (prioritaire)
       ‚ö† Ajuste ici les HEX EXACTS si besoin
       ========================= */
    :root{
      /* Couleurs structure (proche visuel) */
      --ml-blue:#2a2e86;          /* bleu marque */
      --ml-blue-dark:#1f2268;
      --ml-yellow:#f2c200;        /* jaune accent */
      --ml-bg:#f5f6fb;
      --ml-card:#ffffff;
      --ml-text:#111827;
      --ml-muted:#6b7280;
      --ml-line:#e5e7eb;
      --ml-shadow:0 10px 25px rgba(17,24,39,.10);
      --ml-radius:16px;

      /* Cat√©gories catalogue (priorit√©) */
      --cat-accessories:#b10f1b;  /* ROUGE = Accessoires (ONLY) */
      --cat-magnets:#22a35a;      /* VERT = Aimants */
      --cat-site:#2b77d9;         /* BLEU CLAIR = Levage chantier */
      --cat-hoists:#f28c00;       /* ORANGE = Palans */

      /* Labels g√©n√©riques (hors "catalogue") */
      --good:#16a34a;
      --warn:#f59e0b;
      --bad:#dc2626;
      --font: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    *{box-sizing:border-box}
    body{margin:0;font-family:var(--font);color:var(--ml-text);background:var(--ml-bg)}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1200px;margin:0 auto;padding:14px}

    /* ===== Header proche site ===== */
    .topbar{
      background:#fff;
      border-bottom:4px solid var(--cat-accessories); /* rouge en liser√© (OK car branding global, pas une cat√©gorie) */
      box-shadow: 0 6px 20px rgba(17,24,39,.08);
      position:sticky;top:0;z-index:50;
    }
    .topbar-inner{
      max-width:1200px;margin:0 auto;padding:10px 14px;
      display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{
      display:flex;align-items:center;gap:8px;
      font-weight:900;letter-spacing:.2px;font-size:18px;color:var(--ml-blue);
      white-space:nowrap;
    }
    .logo .dot{
      width:34px;height:34px;border-radius:10px;
      background: radial-gradient(circle at 30% 30%, var(--ml-yellow), #ffd84a);
      border:1px solid rgba(0,0,0,.08);
      display:grid;place-items:center;
      color:var(--ml-blue-dark);font-weight:1000;
    }
    .logo .site{display:flex;align-items:baseline;gap:2px}
    .logo .com{color:var(--ml-yellow);font-weight:1000}
    .subtitle{color:var(--ml-muted);font-size:12px;line-height:1.3}
    .top-actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:7px 10px;border-radius:999px;background:#fff;border:1px solid var(--ml-line);
      font-size:12px;font-weight:800;color:#111827;
    }
    .pill b{color:var(--ml-blue)}
    .statusDot{width:10px;height:10px;border-radius:999px;background:var(--warn)}
    .statusDot.good{background:var(--good)}
    .statusDot.warn{background:var(--warn)}
    .statusDot.bad{background:var(--bad)}

    /* ===== Layout ===== */
    .grid{display:grid;grid-template-columns:280px 1.15fr .85fr;gap:14px;margin-top:14px}
    @media (max-width:1100px){.grid{grid-template-columns:280px 1fr}.rightCol{grid-column:1/-1}}
    @media (max-width:860px){.grid{grid-template-columns:1fr}.leftNav{display:none}}

    .card{
      background:var(--ml-card);
      border:1px solid var(--ml-line);
      border-radius:var(--ml-radius);
      box-shadow:var(--ml-shadow);
      overflow:hidden;
    }
    .card .hd{
      padding:12px 14px;border-bottom:1px solid var(--ml-line);
      display:flex;align-items:flex-start;justify-content:space-between;gap:10px;flex-wrap:wrap;
      background:#fff;
    }
    .card .hd h2{margin:0;font-size:14px;font-weight:1000;color:var(--ml-blue-dark)}
    .card .hd p{margin:6px 0 0;color:var(--ml-muted);font-size:12px;line-height:1.4}
    .card .bd{padding:14px}

    /* ===== Nav ===== */
    .navBox{padding:12px}
    .navTitle{font-weight:1000;color:var(--ml-blue-dark);margin:0 0 10px;font-size:13px}
    .navList{display:grid;gap:8px}
    .navItem{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      padding:10px 10px;border-radius:14px;border:1px solid var(--ml-line);
      background:#fff;cursor:pointer;transition:.15s;
    }
    .navItem:hover{border-color:#d1d5db;transform:translateY(-1px)}
    .navItem .q{font-weight:1000;color:#111827;font-size:13px}
    .navItem .tag{font-size:11px;color:var(--ml-muted);font-weight:800}
    .navItem.active{
      border-color: rgba(42,46,134,.35);
      box-shadow: 0 8px 18px rgba(42,46,134,.10);
    }

    /* ===== Mobile sticky Q bar ===== */
    .mobileQBar{
      display:none;position:sticky;top:62px;z-index:45;background:#fff;
      border-bottom:1px solid var(--ml-line);padding:8px 10px;
    }
    .mobileQBar .row{display:flex;gap:8px;overflow:auto;padding-bottom:6px}
    .mBtn{
      border:1px solid var(--ml-line);background:#fff;padding:8px 10px;border-radius:999px;
      font-size:12px;font-weight:900;white-space:nowrap;cursor:pointer;
    }
    .mBtn.active{border-color: rgba(42,46,134,.35);color:var(--ml-blue-dark)}
    @media (max-width:860px){.mobileQBar{display:block}}

    /* ===== Questions ===== */
    .section{
      border:1px solid var(--ml-line);
      border-radius:var(--ml-radius);
      background:#fff;
      padding:12px;
      margin-bottom:12px;
    }
    .qhead{display:flex;align-items:flex-start;justify-content:space-between;gap:10px;margin-bottom:10px}
    .qhead h3{margin:0;font-size:13px;font-weight:1000;color:#111827;line-height:1.3}
    .qhead .hint{margin-top:4px;color:var(--ml-muted);font-size:12px;line-height:1.4}

    .opts{display:grid;gap:10px}
    .opt{
      display:flex;gap:10px;align-items:flex-start;
      padding:12px;border-radius:14px;border:1px solid var(--ml-line);
      background:#fff;transition:.12s;
    }
    .opt:hover{border-color:#d1d5db;background:#fcfcff}
    .opt input{margin-top:2px;transform:scale(1.1)}
    .opt label{cursor:pointer;flex:1}
    .opt b{display:block;font-size:14px}
    .opt .small{display:block;color:var(--ml-muted);font-size:12px;margin-top:2px;line-height:1.35}
    .meta{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}

    /* ===== Chips CATEGORIES (catalogue) ===== */
    .chip{
      display:inline-flex;align-items:center;
      padding:5px 9px;border-radius:999px;
      font-size:12px;font-weight:1000;
      border:1px solid var(--ml-line);
      background:#f8fafc;color:#0f172a;
    }

    /* IMPORTANT : rouge UNIQUEMENT accessoires */
    .chip.accessories{
      border-color: rgba(177,15,27,.35);
      background: rgba(177,15,27,.12);
      color: #7a0b12;
    }

    .chip.magnets{
      border-color: rgba(34,163,90,.35);
      background: rgba(34,163,90,.12);
      color: #0f5a33;
    }
    .chip.site{
      border-color: rgba(43,119,217,.35);
      background: rgba(43,119,217,.12);
      color: #124b93;
    }
    .chip.hoists{
      border-color: rgba(242,140,0,.35);
      background: rgba(242,140,0,.12);
      color: #7a4300;
    }

    /* Chips neutres */
    .chip.core{
      border-color: rgba(42,46,134,.25);
      background: rgba(42,46,134,.09);
      color: var(--ml-blue-dark);
    }
    .chip.risk{
      border-color: rgba(245,158,11,.35);
      background: rgba(245,158,11,.12);
      color: #7a4a00;
    }

    /* Tooltip */
    .tip{
      position:relative;width:28px;height:28px;border-radius:999px;
      border:1px solid var(--ml-line);background:#fff;
      display:grid;place-items:center;font-weight:1000;color:var(--ml-blue-dark);
      cursor:help;flex:0 0 auto;
    }
    .bubble{
      position:absolute;right:0;top:calc(100% + 10px);
      width:min(440px, calc(100vw - 40px));
      background:#fff;border:1px solid var(--ml-line);
      border-radius:14px;box-shadow:var(--ml-shadow);
      padding:12px;display:none;z-index:60;
    }
    .tip:hover .bubble{display:block}
    .bubble .t{margin:0 0 6px;font-size:12px;font-weight:1000;color:#111827}
    .bubble .p{margin:0;color:var(--ml-muted);font-size:12px;line-height:1.45}

    .btn{
      appearance:none;border:1px solid var(--ml-line);background:#fff;color:#111827;
      border-radius:12px;padding:10px 12px;font-size:13px;font-weight:900;
      cursor:pointer;transition:.12s;
    }
    .btn:hover{background:#f9fafb}

    /* Bouton "important" -> ORANGE Palans (catalogue) */
    .btn.hoists{
      border-color: rgba(242,140,0,.45);
      background: rgba(242,140,0,.12);
      color: #7a4300;
    }
    .btn.hoists:hover{background: rgba(242,140,0,.16)}

    /* Bouton "sp√©cialiste" -> ROUGE Accessoires (cat) */
    .btn.accessories{
      border-color: rgba(177,15,27,.40);
      background: rgba(177,15,27,.10);
      color: #7a0b12;
    }
    .btn.accessories:hover{background: rgba(177,15,27,.14)}

    .btn.core{
      border-color: rgba(42,46,134,.25);
      background: rgba(42,46,134,.08);
      color: var(--ml-blue-dark);
    }
    .btn.core:hover{background: rgba(42,46,134,.11)}

    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .divider{height:1px;background:var(--ml-line);margin:12px 0}

    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;border-bottom:1px solid var(--ml-line);vertical-align:top}
    th{font-size:12px;color:var(--ml-muted);text-align:left}
    td{font-size:13px}
    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size:12px;background:#fbfbff;border:1px solid var(--ml-line);
      border-radius:14px;padding:12px;white-space:pre-wrap;color:#0f172a;
    }
    .mini{color:var(--ml-muted);font-size:12px;line-height:1.45;margin-top:8px}
    ul{margin:10px 0 0;padding-left:18px;color:var(--ml-muted);font-size:12px;line-height:1.55}

    .stickyBottom{
      position:sticky;bottom:10px;z-index:40;padding:10px;
      background: rgba(255,255,255,.92);
      border:1px solid var(--ml-line);border-radius:16px;
      box-shadow: 0 10px 25px rgba(17,24,39,.10);
      backdrop-filter: blur(8px);
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="logo">
          <div class="dot">ML</div>
          <div class="site">
            <span>MATERIEL-LEVAGE</span><span class="com">.com</span>
          </div>
        </div>
        <div>
          <div style="font-weight:1000;color:var(--ml-blue-dark)">Aide au choix ‚Äî Arbre de d√©cision Levage (Q1‚ÜíQ5)</div>
          <div class="subtitle">Parcours pour non-sp√©cialistes : on d√©crit l‚Äôusage, puis on oriente vers les familles de produits.</div>
        </div>
      </div>

      <div class="top-actions">
        <span class="pill"><span class="statusDot warn" id="dot"></span><span id="statusTxt">√Ä compl√©ter</span></span>
        <span class="pill">Clart√© : <b id="clarityTxt">100%</b></span>
        <button class="btn" id="resetBtn" type="button">R√©initialiser</button>
        <button class="btn core" id="demoBtn" type="button">Pr√©remplir d√©mo</button>
      </div>
    </div>
  </div>

  <div class="mobileQBar">
    <div class="row" id="mQRow"></div>
  </div>

  <div class="wrap">
    <div class="grid">

      <div class="card leftNav">
        <div class="hd">
          <div>
            <h2>Questions</h2>
            <p>Acc√®s direct Q1‚ÜíQ5. Cliquez pour aller √† une question.</p>
          </div>
        </div>
        <div class="bd navBox">
          <div class="navList" id="navList"></div>
          <div class="mini">
            Les couleurs suivent le catalogue : <b style="color:var(--cat-accessories)">rouge accessoires</b>,
            <b style="color:var(--cat-magnets)">vert aimants</b>,
            <b style="color:var(--cat-site)">bleu chantier</b>,
            <b style="color:var(--cat-hoists)">orange palans</b>.
          </div>
        </div>
      </div>

      <div class="card">
        <div class="hd">
          <div>
            <h2>D√©crivez votre besoin</h2>
            <p>Toutes les questions sont accessibles (pas de blocage ‚Äúsuivant‚Äù).</p>
          </div>
        </div>

        <div class="bd">

          <!-- Q1 -->
          <div class="section" id="q1">
            <div class="qhead">
              <div>
                <h3>Q1 ‚Äî Que devez-vous faire avec la charge ? <span class="subtitle">(plusieurs r√©ponses possibles)</span></h3>
                <div class="hint">On d√©crit l‚Äôaction (usage), pas la r√©f√©rence produit.</div>
              </div>
              <div class="tip">i
                <div class="bubble">
                  <p class="t">Aide ‚Äî Q1</p>
                  <p class="p">Cochez ce que vous faites r√©ellement : lever (vertical), d√©placer (lat√©ral), accrocher/saisir (prise), supporter (structure).</p>
                </div>
              </div>
            </div>

            <div class="opts">
              <div class="opt">
                <input id="q1_lift" type="checkbox">
                <label for="q1_lift">
                  <b>Lever la charge</b>
                  <span class="small">Soulever verticalement (mont√©e / descente).</span>
                  <div class="meta">
                    <span class="chip hoists">Oriente : palans (orange)</span>
                    <span class="chip core">Ex : palan, treuil</span>
                  </div>
                </label>
              </div>

              <div class="opt">
                <input id="q1_move" type="checkbox">
                <label for="q1_move">
                  <b>D√©placer la charge</b>
                  <span class="small">D√©placer (souvent lat√©ralement), sur un ou plusieurs emplacements.</span>
                  <div class="meta">
                    <span class="chip site">Oriente : levage chantier (bleu clair)</span>
                    <span class="chip core">Ex : chariot, rail, translation</span>
                  </div>
                </label>
              </div>

              <div class="opt">
                <input id="q1_hook" type="checkbox">
                <label for="q1_hook">
                  <b>Accrocher / saisir la charge</b>
                  <span class="small">Mettre en prise la charge pour lever ou maintenir.</span>
                  <div class="meta">
                    <span class="chip accessories">Oriente : accessoires (rouge)</span>
                    <span class="chip accessories">Ex : √©lingues, pinces</span>
                  </div>
                </label>
              </div>

              <div class="opt">
                <input id="q1_support" type="checkbox">
                <label for="q1_support">
                  <b>Supporter l‚Äôop√©ration</b>
                  <span class="small">Pr√©voir une structure pour porter l‚Äôappareil (potence/portique‚Ä¶).</span>
                  <div class="meta">
                    <span class="chip core">Oriente : supports</span>
                    <span class="chip core">Ex : potence, portique</span>
                  </div>
                </label>
              </div>
            </div>
          </div>

          <!-- Q2 -->
          <div class="section" id="q2">
            <div class="qhead">
              <div>
                <h3>Q2 ‚Äî Quel type de d√©placement ?</h3>
                <div class="hint">Si vous n‚Äôavez pas coch√© ‚ÄúD√©placer‚Äù en Q1, cette question peut rester vide.</div>
              </div>
              <div class="tip">i
                <div class="bubble">
                  <p class="t">Aide ‚Äî Q2</p>
                  <p class="p">Plus le mouvement est complexe (basculement/retournement), plus on sort du standard ‚Üí validation recommand√©e.</p>
                </div>
              </div>
            </div>

            <div class="opts">
              <div class="opt"><input name="q2_mode" id="q2_vonly" type="radio"><label for="q2_vonly"><b>Verticalement uniquement</b><span class="small">Mont√©e/descente sans translation lat√©rale.</span></label></div>
              <div class="opt"><input name="q2_mode" id="q2_h1" type="radio"><label for="q2_h1"><b>Horizontal ‚Äî une direction</b><span class="small">Translation sur un axe (rail/chariot).</span></label></div>
              <div class="opt"><input name="q2_mode" id="q2_hmulti" type="radio"><label for="q2_hmulti"><b>Horizontal ‚Äî plusieurs directions</b><span class="small">Plusieurs positions dans la zone (mobilit√©).</span></label></div>
              <div class="opt"><input name="q2_mode" id="q2_tilt" type="radio"><label for="q2_tilt"><b>Incliner / basculer</b><span class="small">Positionnement par inclinaison.</span><div class="meta"><span class="chip risk">Souvent √† v√©rifier</span></div></label></div>
              <div class="opt"><input name="q2_mode" id="q2_flip" type="radio"><label for="q2_flip"><b>Retourner la charge</b><span class="small">Retournement complet (180¬∞).</span><div class="meta"><span class="chip risk">Hors standard</span></div></label></div>
              <div class="opt"><input name="q2_mode" id="q2_unknown" type="radio"><label for="q2_unknown"><b>Je ne sais pas</b><span class="small">La synth√®se indiquera si une validation est probable.</span></label></div>
            </div>
          </div>

          <!-- Q3 -->
          <div class="section" id="q3">
            <div class="qhead">
              <div>
                <h3>Q3 ‚Äî O√π se d√©roule l‚Äôop√©ration ?</h3>
                <div class="hint">Poste fixe, zone, plusieurs postes, option multi-sites.</div>
              </div>
              <div class="tip">i
                <div class="bubble">
                  <p class="t">Aide ‚Äî Q3</p>
                  <p class="p">La localisation guide le choix : support fixe / couvrant zone / mobile / transportable.</p>
                </div>
              </div>
            </div>

            <div class="opts">
              <div class="opt"><input name="q3_loc" id="q3_station" type="radio"><label for="q3_station"><b>Un poste de travail d√©di√©</b><span class="small">Toujours au m√™me endroit.</span></label></div>
              <div class="opt"><input name="q3_loc" id="q3_zone" type="radio"><label for="q3_zone"><b>Une zone de travail d√©finie</b><span class="small">D√©placements sur plusieurs m√®tres.</span></label></div>
              <div class="opt"><input name="q3_loc" id="q3_multi" type="radio"><label for="q3_multi"><b>Plusieurs postes / zones</b><span class="small">Emplacements distincts.</span></label></div>
              <div class="opt"><input id="q3_multisite" type="checkbox"><label for="q3_multisite"><b>Option : multi-sites</b><span class="small">Ateliers / b√¢timents / sites diff√©rents.</span><div class="meta"><span class="chip risk">D√©lais/validation ‚Üë</span></div></label></div>
            </div>
          </div>

          <!-- Q4 -->
          <div class="section" id="q4">
            <div class="qhead">
              <div>
                <h3>Q4 ‚Äî Accrochage : ancrages / prise & centre de gravit√©</h3>
                <div class="hint">Oriente fortement le choix des <span style="color:var(--cat-accessories);font-weight:1000">accessoires</span>.</div>
              </div>
              <div class="tip">i
                <div class="bubble">
                  <p class="t">Aide ‚Äî Q4</p>
                  <p class="p"><b>Avec ancrages</b> : nombre de points + CG. <b>Sans ancrages</b> : pince/ventouse/aimant ‚Üí restrictions.</p>
                </div>
              </div>
            </div>

            <div class="opts">
              <div class="opt"><input name="q4_anchor" id="q4_has" type="radio"><label for="q4_has"><b>La charge a des points d‚Äôancrage</b><span class="small">Anneaux, anses, points pr√©vus/valid√©s.</span></label></div>
              <div class="opt"><input name="q4_anchor" id="q4_none" type="radio"><label for="q4_none"><b>La charge n‚Äôa pas de points d‚Äôancrage</b><span class="small">Prise par serrage, ventouse, aimant‚Ä¶</span><div class="meta"><span class="chip risk">Restrictions fr√©quentes</span></div></label></div>
            </div>

            <div class="divider"></div>

            <div id="withAnchors" style="display:none">
              <div class="row" style="justify-content:space-between">
                <span class="chip accessories">Accessoires (ancrages)</span>
                <span class="chip risk">Angles / r√©partition √† v√©rifier</span>
              </div>

              <div class="divider"></div>

              <div class="opts">
                <div class="opt"><input name="q4_points" id="q4_p1" type="radio"><label for="q4_p1"><b>1 point</b><span class="small">Accrochage simple.</span></label></div>
                <div class="opt"><input name="q4_points" id="q4_p2" type="radio"><label for="q4_p2"><b>2 points</b><span class="small">R√©partition √† v√©rifier.</span></label></div>
                <div class="opt"><input name="q4_points" id="q4_p3" type="radio"><label for="q4_p3"><b>3 points</b><span class="small">R√©glages souvent n√©cessaires.</span></label></div>
                <div class="opt"><input name="q4_points" id="q4_p4" type="radio"><label for="q4_p4"><b>4 points</b><span class="small">Angles critiques : validation recommand√©e.</span><div class="meta"><span class="chip risk">Souvent √† v√©rifier</span></div></label></div>
                <div class="opt"><input id="q4_dedicated" type="checkbox"><label for="q4_dedicated"><b>Option : points d√©di√©s au levage</b><span class="small">Points pr√©vus/valid√©s par le fabricant.</span></label></div>
              </div>

              <div class="divider"></div>

              <div class="opts">
                <div class="opt"><input name="q4_cg" id="q4_cg_center" type="radio"><label for="q4_cg_center"><b>Centre de gravit√© centr√©</b><span class="small">Stabilit√© naturelle.</span></label></div>
                <div class="opt"><input name="q4_cg" id="q4_cg_above_off" type="radio"><label for="q4_cg_above_off"><b>CG d√©centr√© (au-dessus des ancrages)</b><span class="small">Inclinaison possible.</span><div class="meta"><span class="chip risk">√Ä v√©rifier</span></div></label></div>
                <div class="opt"><input name="q4_cg" id="q4_cg_below" type="radio"><label for="q4_cg_below"><b>CG sous les ancrages</b><span class="small">Risque de basculement/retournement.</span><div class="meta"><span class="chip risk">Sp√©cialiste recommand√©</span></div></label></div>
                <div class="opt"><input name="q4_cg" id="q4_cg_unknown" type="radio"><label for="q4_cg_unknown"><b>Je ne sais pas</b><span class="small">Validation probable.</span></label></div>
              </div>
            </div>

            <div id="noAnchors" style="display:none">
              <div class="row" style="justify-content:space-between">
                <span class="chip accessories">Accessoires (sans ancrage)</span>
                <span class="chip risk">Restrictions d‚Äôusage</span>
              </div>

              <div class="divider"></div>

              <div class="opts">
                <div class="opt"><input name="q4_grip" id="q4_grip_positive" type="radio"><label for="q4_grip_positive"><b>Prise positive</b><span class="small">Accrochage m√©canique par forme.</span></label></div>
                <div class="opt"><input name="q4_grip" id="q4_grip_clamp" type="radio"><label for="q4_grip_clamp"><b>Serrage (pince)</b><span class="small">Maintien par pression.</span><div class="meta"><span class="chip risk">√Ä v√©rifier</span></div></label></div>
                <div class="opt"><input name="q4_grip" id="q4_grip_suction" type="radio"><label for="q4_grip_suction"><b>Ventouses</b><span class="small">Surface compatible, √©tanch√©it√©.</span><div class="meta"><span class="chip risk">Restrictions</span></div></label></div>
                <div class="opt"><input name="q4_grip" id="q4_grip_mag" type="radio"><label for="q4_grip_mag"><b>Aimants</b><span class="small">Uniquement ferromagn√©tique.</span><div class="meta"><span class="chip magnets">Cat√©gorie : aimants (vert)</span><span class="chip risk">Restrictions</span></div></label></div>
                <div class="opt"><input name="q4_grip" id="q4_grip_unknown" type="radio"><label for="q4_grip_unknown"><b>Je ne sais pas</b><span class="small">Validation probable.</span></label></div>
              </div>

              <div class="divider"></div>

              <div class="opts">
                <div class="opt"><input name="q4_stab" id="q4_stab_stable" type="radio"><label for="q4_stab_stable"><b>Charge stable</b><span class="small">Peu de risque d‚Äôinclinaison.</span></label></div>
                <div class="opt"><input name="q4_stab" id="q4_stab_sensitive" type="radio"><label for="q4_stab_sensitive"><b>Charge sensible</b><span class="small">Peut s‚Äôincliner.</span><div class="meta"><span class="chip risk">√Ä v√©rifier</span></div></label></div>
                <div class="opt"><input name="q4_stab" id="q4_stab_unstable" type="radio"><label for="q4_stab_unstable"><b>Charge instable</b><span class="small">Risque fort de basculement.</span><div class="meta"><span class="chip risk">Sp√©cialiste recommand√©</span></div></label></div>
                <div class="opt"><input name="q4_stab" id="q4_stab_unknown" type="radio"><label for="q4_stab_unknown"><b>Je ne sais pas</b><span class="small">Validation probable.</span></label></div>
              </div>
            </div>
          </div>

          <!-- Q5 -->
          <div class="section" id="q5">
            <div class="qhead">
              <div>
                <h3>Q5 ‚Äî Qualit√© de manutention attendue ?</h3>
                <div class="hint">Pr√©cision / positionnement / plan√©it√© ‚Üí impact vitesse, ballant, stabilit√©.</div>
              </div>
              <div class="tip">i
                <div class="bubble">
                  <p class="t">Aide ‚Äî Q5</p>
                  <p class="p">Plus c‚Äôest pr√©cis, plus il faut ma√Ætriser vitesse et ballant (souvent validation).</p>
                </div>
              </div>
            </div>

            <div class="opts">
              <div class="opt"><input name="q5_quality" id="q5_simple" type="radio"><label for="q5_simple"><b>Simple</b><span class="small">Positionnement approximatif acceptable.</span></label></div>
              <div class="opt"><input name="q5_quality" id="q5_precise" type="radio"><label for="q5_precise"><b>Pr√©cise</b><span class="small">Sans √†-coups, ballant limit√©.</span><div class="meta"><span class="chip risk">Souvent √† v√©rifier</span></div></label></div>
              <div class="opt"><input name="q5_quality" id="q5_very" type="radio"><label for="q5_very"><b>Tr√®s pr√©cise</b><span class="small">Contr√¥le permanent, ballant quasi nul.</span><div class="meta"><span class="chip risk">Validation recommand√©e</span></div></label></div>
              <div class="opt"><input name="q5_quality" id="q5_unknown" type="radio"><label for="q5_unknown"><b>Je ne sais pas</b><span class="small">Validation probable.</span></label></div>
            </div>
          </div>

          <div class="stickyBottom">
            <div class="row" style="justify-content:space-between">
              <div class="row">
                <button class="btn core" id="updateBtn" type="button">Mettre √† jour la synth√®se</button>
                <button class="btn" id="copyBtn" type="button">Copier le cahier des charges</button>
              </div>
              <div class="row">
                <button class="btn hoists" id="downloadBtn" type="button">T√©l√©charger (.txt)</button>
              </div>
            </div>
            <div class="mini" id="msg"></div>
          </div>

        </div>
      </div>

      <div class="card rightCol">
        <div class="hd">
          <div>
            <h2>Orientation & Cahier des charges</h2>
            <p>Pr√©-qualification + alertes quand une validation sp√©cialiste est recommand√©e.</p>
          </div>
        </div>
        <div class="bd">

          <div class="row" style="justify-content:space-between">
            <span class="chip accessories">Accessoires (rouge)</span>
            <span class="chip magnets">Aimants (vert)</span>
            <span class="chip site">Chantier (bleu clair)</span>
            <span class="chip hoists">Palans (orange)</span>
          </div>

          <div class="divider"></div>

          <table>
            <thead><tr><th>Ce que vous avez d√©crit</th><th>Impact</th></tr></thead>
            <tbody id="summary"></tbody>
          </table>

          <div class="divider"></div>

          <div class="row" style="justify-content:space-between">
            <span class="chip risk">Alertes / recommandations</span>
            <span class="subtitle" id="recapFamilies">‚Äî</span>
          </div>
          <ul id="alerts"></ul>

          <div class="divider"></div>

          <div class="row" style="justify-content:space-between">
            <span class="chip core">Cahier des charges (copiable)</span>
            <span class="subtitle" id="complexity">‚Äî</span>
          </div>

          <div class="mono" id="cdc">‚Äî</div>
          <div class="mini">
            Si l‚Äôoutil conclut ‚ÄúSp√©cialiste recommand√©‚Äù, action attendue :
            <button class="btn accessories" type="button" id="callBtn">Appeler un sp√©cialiste Mat√©riel-Levage</button>
          </div>

        </div>
      </div>

    </div>
  </div>

  <script>
    const $ = (id)=>document.getElementById(id);

    const questions = [
      { id:"q1", label:"Q1", title:"Action sur la charge", tag:"Base" },
      { id:"q2", label:"Q2", title:"Type de d√©placement", tag:"Mouvement" },
      { id:"q3", label:"Q3", title:"Localisation", tag:"Contexte" },
      { id:"q4", label:"Q4", title:"Accrochage / CG", tag:"Critique" },
      { id:"q5", label:"Q5", title:"Qualit√© / pr√©cision", tag:"Finition" }
    ];

    function scrollToQ(id){
      const el = $(id);
      if(!el) return;
      el.scrollIntoView({behavior:"smooth", block:"start"});
      setActiveNav(id);
    }
    function setActiveNav(id){
      document.querySelectorAll(".navItem").forEach(x=>x.classList.remove("active"));
      document.querySelectorAll(".mBtn").forEach(x=>x.classList.remove("active"));
      const a = document.querySelector(\`.navItem[data-id="\${id}"]\`);
      const b = document.querySelector(\`.mBtn[data-id="\${id}"]\`);
      if(a) a.classList.add("active");
      if(b) b.classList.add("active");
    }
    function buildNav(){
      const navList = $("navList");
      navList.innerHTML = "";
      questions.forEach((q, idx)=>{
        const div = document.createElement("div");
        div.className = "navItem" + (idx===0 ? " active":"");
        div.dataset.id = q.id;
        div.innerHTML = \`<div><div class="q">\${q.label} ‚Äî \${q.title}</div><div class="tag">\${q.tag}</div></div><div style="color:var(--ml-blue);font-weight:1000">‚Üí</div>\`;
        div.onclick = ()=>scrollToQ(q.id);
        navList.appendChild(div);
      });

      const mRow = $("mQRow");
      mRow.innerHTML = "";
      questions.forEach((q, idx)=>{
        const btn = document.createElement("button");
        btn.type="button";
        btn.className="mBtn" + (idx===0?" active":"");
        btn.dataset.id=q.id;
        btn.textContent=q.label;
        btn.onclick=()=>scrollToQ(q.id);
        mRow.appendChild(btn);
      });
    }

    function checked(id){ return $(id).checked; }
    function radioVal(name){
      const n = document.querySelector(\`input[name="\${CSS.escape(name)}"]:checked\`);
      return n ? n.id : null;
    }

    function readState(){
      return {
        q1: { lift: checked("q1_lift"), move: checked("q1_move"), hook: checked("q1_hook"), support: checked("q1_support") },
        q2: radioVal("q2_mode"),
        q3: radioVal("q3_loc"),
        q3_multisite: checked("q3_multisite"),
        q4_anchor: radioVal("q4_anchor"),
        q4_points: radioVal("q4_points"),
        q4_dedicated: checked("q4_dedicated"),
        q4_cg: radioVal("q4_cg"),
        q4_grip: radioVal("q4_grip"),
        q4_stab: radioVal("q4_stab"),
        q5: radioVal("q5_quality")
      };
    }

    function updateQ4Visibility(s){
      $("withAnchors").style.display = (s.q4_anchor === "q4_has") ? "block" : "none";
      $("noAnchors").style.display = (s.q4_anchor === "q4_none") ? "block" : "none";
    }

    function clarityScore(s){
      let score = 100;
      if(!s.q1.lift && !s.q1.move && !s.q1.hook && !s.q1.support) score -= 60;
      if(s.q1.move && !s.q2) score -= 12;
      if((s.q1.lift || s.q1.move) && !s.q3) score -= 12;
      if(s.q1.hook && !s.q4_anchor) score -= 18;

      if(s.q4_anchor === "q4_has"){
        if(!s.q4_points) score -= 10;
        if(!s.q4_cg) score -= 10;
        if(s.q4_cg === "q4_cg_unknown") score -= 8;
      }
      if(s.q4_anchor === "q4_none"){
        if(!s.q4_grip) score -= 10;
        if(!s.q4_stab) score -= 10;
      }

      if((s.q1.lift || s.q1.move || s.q1.hook) && !s.q5) score -= 8;
      if(s.q2 === "q2_unknown") score -= 6;
      if(s.q5 === "q5_unknown") score -= 6;

      return Math.max(0, Math.min(100, Math.round(score)));
    }

    function buildCDC(s, clarity, status, complexity, families, alerts){
      const lines = [];
      lines.push("CAHIER DES CHARGES ‚Äî AIDE AU CHOIX (LEVAGE) ‚Äî Pr√©-qualification");
      lines.push("");
      lines.push(\`Clart√© : \${clarity}%\`);
      lines.push(\`Statut : \${status}\`);
      lines.push(\`Complexit√© : \${complexity}\`);
      lines.push(\`Familles orient√©es : \${families.length ? families.join(" / ") : "Non d√©termin√©"}\`);
      lines.push("");
      lines.push("1) Actions");
      lines.push(\`- Lever : \${s.q1.lift ? "Oui" : "Non"}\`);
      lines.push(\`- D√©placer : \${s.q1.move ? "Oui" : "Non"}\`);
      lines.push(\`- Accrocher/saisir : \${s.q1.hook ? "Oui" : "Non"}\`);
      lines.push(\`- Supporter : \${s.q1.support ? "Oui" : "Non"}\`);

      if(s.q1.move){
        const mapQ2 = { q2_vonly:"Vertical uniquement", q2_h1:"Horizontal 1 direction", q2_hmulti:"Horizontal multi-direction", q2_tilt:"Incliner/basculer", q2_flip:"Retourner 180¬∞", q2_unknown:"Inconnu" };
        lines.push("");
        lines.push("2) D√©placement");
        lines.push(\`- \${mapQ2[s.q2] || "Non renseign√©"}\`);
      }

      if(s.q1.lift || s.q1.move){
        const mapQ3 = { q3_station:"Poste d√©di√©", q3_zone:"Zone d√©finie", q3_multi:"Plusieurs postes/zones" };
        lines.push("");
        lines.push("3) Localisation");
        lines.push(\`- \${mapQ3[s.q3] || "Non renseign√©"}\${s.q3_multisite ? " (+ multi-sites)" : ""}\`);
      }

      if(s.q1.hook){
        lines.push("");
        lines.push("4) Accrochage");
        if(s.q4_anchor === "q4_has"){
          const ptsMap = { q4_p1:"1", q4_p2:"2", q4_p3:"3", q4_p4:"4" };
          const cgMap = { q4_cg_center:"CG centr√©", q4_cg_above_off:"CG d√©centr√© (au-dessus)", q4_cg_below:"CG sous ancrages", q4_cg_unknown:"CG inconnu" };
          lines.push(\`- Points d‚Äôancrage : \${ptsMap[s.q4_points] || "?"}\${s.q4_dedicated ? " (d√©di√©s)" : ""}\`);
          lines.push(\`- Centre de gravit√© : \${cgMap[s.q4_cg] || "?"}\`);
        } else if(s.q4_anchor === "q4_none"){
          const gripMap = { q4_grip_positive:"Prise positive", q4_grip_clamp:"Serrage (pince)", q4_grip_suction:"Ventouses", q4_grip_mag:"Aimants", q4_grip_unknown:"Inconnu" };
          const stabMap = { q4_stab_stable:"Stable", q4_stab_sensitive:"Sensible", q4_stab_unstable:"Instable", q4_stab_unknown:"Inconnu" };
          lines.push("- Absence de points d‚Äôancrage : Oui");
          lines.push(\`- Mode de prise : \${gripMap[s.q4_grip] || "?"}\`);
          lines.push(\`- Stabilit√© : \${stabMap[s.q4_stab] || "?"}\`);
        } else {
          lines.push("- Non renseign√©");
        }
      }

      if(s.q1.lift || s.q1.move || s.q1.hook){
        const mapQ5 = { q5_simple:"Simple", q5_precise:"Pr√©cise", q5_very:"Tr√®s pr√©cise", q5_unknown:"Inconnu" };
        lines.push("");
        lines.push("5) Qualit√© attendue");
        lines.push(\`- \${mapQ5[s.q5] || "Non renseign√©"}\`);
      }

      lines.push("");
      lines.push("Alertes / recommandations");
      (alerts.length ? alerts : ["Aucune alerte √† ce stade."]).forEach(a=>lines.push(\`- \${a}\`));
      lines.push("");
      lines.push("Prochaine √©tape : s√©lectionner des r√©f√©rences et valider (CMU, angles, √©nergie, installation, environnement, maintenance).");
      return lines.join("\\n");
    }

    function compute(s){
      const rows = [];
      const alerts = [];
      const families = [];

      if(s.q1.support) families.push("Supports");
      if(s.q1.lift || s.q1.move) families.push("Appareils");
      if(s.q1.hook) families.push("Accessoires");

      const actions = [];
      if(s.q1.lift) actions.push("Lever");
      if(s.q1.move) actions.push("D√©placer");
      if(s.q1.hook) actions.push("Accrocher/saisir");
      if(s.q1.support) actions.push("Supporter");
      rows.push(["Actions", actions.length ? actions.join(", ") : "Non renseign√©"]);

      const mapQ2 = { q2_vonly:"Vertical uniquement", q2_h1:"Horizontal (1 direction)", q2_hmulti:"Horizontal (multi-direction)", q2_tilt:"Incliner/basculer", q2_flip:"Retourner (180¬∞)", q2_unknown:"Inconnu" };
      if(s.q1.move) rows.push(["D√©placement", mapQ2[s.q2] || "Non renseign√©"]);

      const mapQ3 = { q3_station:"Poste d√©di√©", q3_zone:"Zone d√©finie", q3_multi:"Plusieurs postes/zones" };
      if(s.q1.lift || s.q1.move){
        let loc = mapQ3[s.q3] || "Non renseign√©";
        if(s.q3_multisite) loc += " (+ multi-sites)";
        rows.push(["Localisation", loc]);
      }

      if(s.q1.hook){
        if(s.q4_anchor === "q4_has"){
          const ptsMap = { q4_p1:"1", q4_p2:"2", q4_p3:"3", q4_p4:"4" };
          const cgMap = { q4_cg_center:"CG centr√©", q4_cg_above_off:"CG d√©centr√© (au-dessus)", q4_cg_below:"CG sous ancrages", q4_cg_unknown:"CG inconnu" };
          rows.push(["Accrochage", `Points : ${ptsMap[s.q4_points] || "?"}${s.q4_dedicated?" (d√©di√©s)":"")} ‚Ä¢ ${cgMap[s.q4_cg] || "CG ?"} `]);
          if(s.q4_points === "q4_p4" || s.q4_points === "q4_p3") alerts.push("3‚Äì4 points : angles/r√©partition √† valider (√©cart CMU possible).");
          if(s.q4_cg === "q4_cg_below") alerts.push("CG sous ancrages : risque de basculement ‚Üí sp√©cialiste recommand√©.");
          if(s.q4_cg === "q4_cg_above_off") alerts.push("CG d√©centr√© : pr√©voir √©quilibrage et contr√¥le d‚Äôinclinaison.");
        } else if(s.q4_anchor === "q4_none"){
          rows.push(["Accrochage", "Sans ancrage : restrictions fr√©quentes (surface, mat√©riau, s√©curit√©)."]);
          alerts.push("Sans ancrage : restrictions d‚Äôutilisation fr√©quentes.");
        } else {
          rows.push(["Accrochage", "Non renseign√©"]);
          alerts.push("Accrochage non renseign√© : validation probable.");
        }
      }

      const mapQ5 = { q5_simple:"Simple", q5_precise:"Pr√©cise", q5_very:"Tr√®s pr√©cise", q5_unknown:"Inconnu" };
      if(s.q1.lift || s.q1.move || s.q1.hook) rows.push(["Qualit√© attendue", mapQ5[s.q5] || "Non renseign√©"]);

      let complexity = "Mod√©r√©";
      if(s.q2 === "q2_flip") complexity = "Hors standard";
      if(s.q2 === "q2_tilt") complexity = "Complexe";
      if(s.q5 === "q5_very") complexity = "Complexe";

      const clarity = clarityScore(s);
      let status = "Pr√©-s√©lection possible";
      let dot = "good";
      if(clarity < 70){ status = "√Ä compl√©ter"; dot = "warn"; }
      if(complexity === "Complexe"){ status = "√Ä v√©rifier"; dot = "warn"; }
      if(complexity === "Hors standard"){ status = "Sp√©cialiste recommand√©"; dot = "bad"; }

      if(s.q3_multisite) alerts.push("Multi-sites : solution transportable/d√©montable + validation par site.");
      if(!s.q1.lift && !s.q1.move && !s.q1.hook && !s.q1.support) alerts.unshift("Commencez par cocher au moins une action en Q1.");

      const cdc = buildCDC(s, clarity, status, complexity, families, alerts);
      return { rows, alerts, families, clarity, status, dot, complexity, cdc };
    }

    function escapeHtml(s){
      return String(s).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;");
    }

    function getCurrentSectionId(){
      const ids = questions.map(q=>q.id);
      let best = ids[0], bestTop = Infinity;
      ids.forEach(id=>{
        const el = $(id); if(!el) return;
        const r = el.getBoundingClientRect();
        const d = Math.abs(r.top - 120);
        if(d < bestTop){ bestTop = d; best = id; }
      });
      return best;
    }

    function render(activeId=null){
      const s = readState();
      updateQ4Visibility(s);
      const out = compute(s);

      $("clarityTxt").textContent = out.clarity + "%";
      $("statusTxt").textContent = out.status;
      $("dot").className = "statusDot " + out.dot;

      const tb = $("summary");
      tb.innerHTML = "";
      out.rows.forEach(([a,b])=>{
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${escapeHtml(a)}</td><td>${escapeHtml(b)}</td>`;
        tb.appendChild(tr);
      });

      const ul = $("alerts");
      ul.innerHTML = "";
      (out.alerts.length ? out.alerts : ["Continuez √† pr√©ciser si possible."]).forEach(x=>{
        const li = document.createElement("li");
        li.textContent = x;
        ul.appendChild(li);
      });

      $("recapFamilies").textContent = out.families.length ? ("Familles : " + out.families.join(" / ")) : "Familles : ‚Äî";
      $("complexity").textContent = "Complexit√© : " + out.complexity;
      $("cdc").textContent = out.cdc;

      if(activeId) setActiveNav(activeId);
    }

    function resetAll(){
      document.querySelectorAll("input").forEach(inp=>{
        if(inp.type==="checkbox" || inp.type==="radio") inp.checked=false;
      });
      $("msg").textContent = "";
      render("q1");
      scrollToQ("q1");
    }

    function fillDemo(){
      resetAll();
      $("q1_lift").checked = true;
      $("q1_move").checked = true;
      $("q1_hook").checked = true;
      $("q1_support").checked = true;
      $("q2_hmulti").checked = true;
      $("q3_multi").checked = true;
      $("q3_multisite").checked = true;
      $("q4_has").checked = true;
      $("q4_p4").checked = true;
      $("q4_dedicated").checked = true;
      $("q4_cg_above_off").checked = true;
      $("q5_precise").checked = true;
      render("q1");
    }

    async function copyCDC(){
      const txt = $("cdc").textContent || "";
      $("msg").textContent = "";
      try{
        if(navigator.clipboard && window.isSecureContext){
          await navigator.clipboard.writeText(txt);
        } else {
          const ta=document.createElement("textarea");
          ta.value=txt; ta.style.position="fixed"; ta.style.left="-9999px";
          document.body.appendChild(ta); ta.select(); document.execCommand("copy"); ta.remove();
        }
        $("msg").textContent = "Cahier des charges copi√© ‚úÖ";
        $("msg").style.color = "var(--good)";
      }catch(e){
        $("msg").textContent = "Copie impossible : s√©lectionnez manuellement le texte.";
        $("msg").style.color = "var(--bad)";
      }
    }

    function downloadCDC(){
      const txt = $("cdc").textContent || "";
      const blob = new Blob([txt], {type:"text/plain;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href=url; a.download="cahier-des-charges-levage.txt";
      document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(url), 1500);
      $("msg").textContent = "Fichier t√©l√©charg√© ‚úÖ";
      $("msg").style.color = "var(--good)";
    }

    function bindAll(){
      document.querySelectorAll("input").forEach(inp=>{
        inp.addEventListener("change", ()=>{
          if(inp.id === "q4_has" || inp.id === "q4_none"){
            document.querySelectorAll('input[name="q4_points"]').forEach(x=>x.checked=false);
            document.querySelectorAll('input[name="q4_cg"]').forEach(x=>x.checked=false);
            document.querySelectorAll('input[name="q4_grip"]').forEach(x=>x.checked=false);
            document.querySelectorAll('input[name="q4_stab"]').forEach(x=>x.checked=false);
            $("q4_dedicated").checked=false;
          }
          render(getCurrentSectionId());
        });
      });

      $("resetBtn").addEventListener("click", resetAll);
      $("demoBtn").addEventListener("click", fillDemo);
      $("updateBtn").addEventListener("click", ()=>{ render(getCurrentSectionId()); $("msg").textContent="Synth√®se mise √† jour ‚úÖ"; $("msg").style.color="var(--good)"; });
      $("copyBtn").addEventListener("click", copyCDC);
      $("downloadBtn").addEventListener("click", downloadCDC);

      const callBtn = $("callBtn");
      if(callBtn){
        callBtn.addEventListener("click", ()=>{
          alert("üëâ Sp√©cialiste Mat√©riel-Levage : utilisez le cahier des charges copi√© pour votre demande.");
        });
      }

      window.addEventListener("scroll", ()=>setActiveNav(getCurrentSectionId()), {passive:true});
    }

    buildNav();
    bindAll();
    render("q1");
  </script>
</body>
</html>
